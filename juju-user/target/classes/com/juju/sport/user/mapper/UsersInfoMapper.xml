<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.juju.sport.user.mapper.UsersInfoMapper">
  <sql id="Base_Column_List" >
    id, user_account_id, provinceId, cityId, countryId, address, contacts, mobile_no, 
    descs, charge_type, venue_type, other_services, email, nick_name, user_level, user_score, 
    create_time, last_update_time, stat, venue_img, max_num, x_location, y_location
  </sql>
  
    <resultMap id="BaseResultMap" type="com.juju.sport.user.pojo.VenuesInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri May 08 18:15:40 CST 2015.
    -->
    <id column="id" property="id" jdbcType="VARCHAR" />
    <result column="user_account_id" property="userAccountId" jdbcType="VARCHAR" />
    <result column="provinceId" property="provinceid" jdbcType="INTEGER" />
    <result column="cityId" property="cityid" jdbcType="INTEGER" />
    <result column="countryId" property="countryid" jdbcType="INTEGER" />
    <result column="address" property="address" jdbcType="VARCHAR" />
    <result column="contacts" property="contacts" jdbcType="VARCHAR" />
    <result column="mobile_no" property="mobileNo" jdbcType="VARCHAR" />
    <result column="descs" property="descs" jdbcType="VARCHAR" />
    <result column="charge_type" property="chargeType" jdbcType="INTEGER" />
    <result column="venue_type" property="venueType" jdbcType="VARCHAR" />
    <result column="other_services" property="otherServices" jdbcType="VARCHAR" />
    <result column="email" property="email" jdbcType="VARCHAR" />
    <result column="nick_name" property="nickName" jdbcType="VARCHAR" />
    <result column="user_level" property="userLevel" jdbcType="INTEGER" />
    <result column="user_score" property="userScore" jdbcType="INTEGER" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="last_update_time" property="lastUpdateTime" jdbcType="TIMESTAMP" />
    <result column="stat" property="stat" jdbcType="INTEGER" />
    <result column="venue_img" property="venueImg" jdbcType="VARCHAR" />
    <result column="max_num" property="maxNum" jdbcType="INTEGER" />
    <result column="x_location" property="xLocation" jdbcType="DOUBLE" />
    <result column="y_location" property="yLocation" jdbcType="DOUBLE" />
    <collection select="selectVenuesServiceTypeMapping" property="serviceTypeList" javaType="ArrayList" 
    			column="id" ofType="com.juju.sport.base.pojo.ServiceType" />
    			
    <collection select="selectVenuesSportTypeMapping" property="sportTypeList" javaType="ArrayList" 
    			column="id" ofType="com.juju.sport.base.pojo.SportType" />
  </resultMap>
      <select id="selectVenuesServiceTypeMapping" parameterType="java.lang.String" resultType="com.juju.sport.base.pojo.ServiceType" >
  	<![CDATA[
    	select id, service_name serviceName, create_time createTime, last_update_time lastUpdateTime, stat 
		from juju_service_type where stat=1 and id in (
			select service_type_id from juju_venues_service_type_mapping 
			where stat=1 and venues_info_id=#{id}
		)
    ]]>
  	</select>
  
	  <select id="selectVenuesSportTypeMapping" parameterType="java.lang.String" resultType="com.juju.sport.base.pojo.SportType" >
	  	<![CDATA[
	    	select id, sport_name sportName, create_time createTime, last_update_time lastUpdateTime, stat 
	    	from juju_sport_type type where stat =1 and type.id in (
				select sport_type_id from juju_venues_sport_type_mapping 
				where stat=1 and venues_info_id=#{id}
			)
	    ]]>
	  </select>
	<select id="selectUsersByUserAccountId" resultType="com.juju.sport.user.dto.UsersDto"
		parameterType="java.lang.String">
		select users.id,users.real_name as realName,users.job as job,users.provinceId as provinceId,users.cityId as cityId,users.countryId as countryId,users.address as address,users.email as email,users.mobile_no as mobileNo,users.age as age,users.user_image as userImage,acc.user_account as userAccount,
		users.brithday as brithday,users.nick_name as nickName,users.charge_type as chargeType,users.venue_type as venueType,users.user_level as userLevel,users.user_score as userScore,users.create_time as createTime,users.last_update_time as lastUpdateTime,users.height as height,users.weight as weight
		from juju_users users inner join juju_user_account acc on users.user_account_id = acc.id
		where users.user_account_id = #{userId,jdbcType=VARCHAR}
	</select>
	
	<select id="selectStadiumByUserAccountId" resultMap="BaseResultMap"
		parameterType="java.lang.String">
		select  <include refid="Base_Column_List" />
		from juju_venues_info
		where user_account_id = #{userAccountId,jdbcType=VARCHAR}
	</select>
	

<!-- 	<update id="updateByUserAccountId" resultType="Integer"
		parameterType="BaseResultMap">
		update juju_users set
		id=#{id,jdbcType=VARCHAR},realName=#{realName,jdbcType=VARCHAR},
		provinceid=#{provinceid,jdbcType=INTEGER},
		cityid=#{cityid,jdbcType=INTEGER},
		countryid=#{countryid,jdbcType=INTEGER},address=
		#{address,jdbcType=VARCHAR},email= #{email,jdbcType=VARCHAR},
		mobileNo=#{mobileNo,jdbcType=VARCHAR},age=
		#{age,jdbcType=INTEGER},userImage= #{userImage,jdbcType=VARCHAR},
		brithday=#{brithday,jdbcType=DATE},nickName=
		#{nickName,jdbcType=VARCHAR},chargeType=
		#{chargeType,jdbcType=INTEGER},
		venueType=#{venueType,jdbcType=VARCHAR},userLevel=
		#{userLevel,jdbcType=INTEGER},userScore=
		#{userScore,jdbcType=INTEGER},
		createTime=#{createTime,jdbcType=TIMESTAMP},lastUpdateTime=
		#{lastUpdateTime,jdbcType=TIMESTAMP}, stat=#{stat,jdbcType=INTEGER} 
		where user_account_id = #{userId,jdbcType=VARCHAR}
	</update> -->
</mapper>